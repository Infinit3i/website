---
title: "UFW Egress Hardening on Arch Linux"
date: 2026-02-20 15:00:00 -0500
categories: [Linux, Security Engineering]
tags: [ufw, arch linux, firewall, egress filtering, network hardening, steam, gaming]
image:
  path: https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwikit.ro%2Fwp-content%2Fuploads%2F2025%2F03%2Fufw.jpg%3Fv%3D1751591765&f=1&nofb=1&ipt=a93855187c6e90716b74cf698a9bd7de57debb4861dd9fc2588908c94ebb0716
---

I don’t like running systems I don’t understand. By default, most desktops allow all outbound traffic and only worry about inbound filtering. That model assumes trust. I wanted visibility and control. So I flipped the model: deny all outbound traffic and explicitly allow only what I use. The goal wasn’t paranoia — it was clarity. If something leaves my machine, I want to know why.

## UFW Setup and Egress Hardening (Arch Linux)

### Install UFW

<!-- markdownlint-capture -->
> Install UFW for Debian / Ubuntu
{: .prompt-tip }
<!-- markdownlint-restore -->

```bash
sudo apt update
sudo apt install ufw
```

<!-- markdownlint-capture -->
> Install UFW for Fedora
{: .prompt-tip }
<!-- markdownlint-restore -->

```bash
sudo dnf install ufw
```

<!-- markdownlint-capture -->
> Install UFW for Arch
{: .prompt-tip }
<!-- markdownlint-restore -->

```bash
sudo pacman -S ufw
```

### Enable and Start Service (Persist at Boot)

```bash
sudo systemctl enable ufw.service
sudo systemctl start ufw.service
```

Verify:

```bash
systemctl status ufw
```

Expected:

```bash
Active: active (exited)
```

---

Switching to a deny-by-default egress policy immediately exposed how much background noise a modern Linux system generates. Multicast discovery, broadcast traffic, QUIC, IPv6 chatter — constant activity that most users never see. The important part wasn’t blocking it; it was understanding it. This exercise forced me to separate necessary traffic from convenience traffic and build a firewall policy based on intent rather than defaults.

Switching outbound traffic to deny immediately exposed how noisy modern systems are. Multicast DNS (5353), SSDP (1900), broadcast traffic, IPv6 chatter, QUIC (UDP 443), and ICMP requests were constantly generated. Most of it was background discovery traffic, not functional breakage.

### 4. Set Secure Defaults

```bash
sudo ufw default deny incoming
sudo ufw default deny outgoing
```

---

### 4️ Allow Core System Ports (Minimal Internet Functionality)

#### DNS:

```bash
sudo ufw allow out 53
```

#### DNS over TLS:

```bash
sudo ufw allow out 853/tcp
```

#### mDNS:

<!-- markdownlint-capture -->
> Spotify uses this for discovery of local devices on the LAN
{: .prompt-tip }
<!-- markdownlint-restore -->

```bash
sudo ufw allow out 5353/udp
```

#### HTTP:

```bash
sudo ufw allow out 80/tcp
```

#### HTTPS:

```bash
sudo ufw allow out 443/tcp
sudo ufw allow out 443/udp
```

#### NTP:

```bash
sudo ufw allow out 123/udp
```


### 5 Enable Firewall Rules

- enable and init

```bash
sudo ufw enable
sudo ufw reload
```

---

### 6 Optional: Logging for Visibility

```bash
sudo ufw logging medium
```

Check blocks:

```bash
journalctl -xe | grep UFW
```

---

## Final Allowed Outbound Ports

| Port        | Protocol | Purpose                  |
| ----------- | -------- | ------------------------ |
| 53          | TCP/UDP  | DNS                      |
| 853         | TCP      | DNS over TLS             |
| 80          | TCP      | HTTP                     |
| 443         | TCP      | HTTPS                    |
| 443         | UDP      | QUIC                     |
| 123         | UDP      | NTP                      |
| 5353        | UDP      | Multicast for Spotify    |

A properly configured firewall does not require opening ephemeral port ranges. Allowing destination service ports (e.g., 443/tcp) is sufficient because RELATED and ESTABLISHED traffic is automatically permitted.

For a functional hardened desktop, I allowed only core ports (53, 853, 80, 443 TCP/UDP, 123) and then later added 5353/UDP for spotify discovery. Everything else remained blocked without impacting usability.

This great expirment clarified how outbound control differs from inbound filtering and demonstrated that a deny-by-default egress model is viable on a modern desktop with measured adjustments.

I learned so much about what each application on my computer was doing and what i needed to be aware of. I want to know all telemetry going out of my machines and what I am allowing.